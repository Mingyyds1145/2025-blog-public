# Python 运算符详解

## 目录
I. [算术运算符](#算术运算符)
II. [比较运算符](#比较运算符)
III. [赋值运算符](#赋值运算符)
IV. [位运算符](#位运算符)<br>
V. [逻辑运算符](#逻辑运算符)
VI. [成员运算符](#成员运算符)
VII. [身份运算符](#身份运算符)

---

## 算术运算符

用于执行基本的数学运算。

| 运算符 | 名称 | 描述 | 示例 | 结果 |
|--------|------|------|------|------|
| `+` | 加 | 两个对象相加 | `10 + 21` | `31` |
| `-` | 减 | 得到负数或是一个数减去另一个数 | `10 - 21` | `-11` |
| `*` | 乘 | 两个数相乘或是返回一个被重复若干次的字符串 | `10 * 21` | `210` |
| `/` | 除 | x 除以 y，返回浮点数 | `21 / 10` | `2.1` |
| `%` | 取模 | 返回除法的余数 | `21 % 10` | `1` |
| `**` | 幂 | 返回x的y次幂 | `10 ** 21` | `10的21次方` |
| `//` | 取整除 | 往小的方向取整数 | `9 // 2`<br>`-9 // 2` | `4`<br>`-5` |

### 详细说明：

I. **加法运算符 (`+`)**：
   - 对于数字：执行算术加法
   - 对于字符串：连接两个字符串
   - 对于列表：连接两个列表

 ```python
   # 数字加法
   print(3 + 5)  # 8
   
   # 字符串连接
   print("Hello" + " " + "World")  # "Hello World"
   
   # 列表连接
   print([1, 2] + [3, 4])  # [1, 2, 3, 4]
```

II. **乘法运算符 (`*`)**：
   - 对于数字：执行算术乘法
   - 对于字符串/列表：重复指定次数

 ```python
   # 数字乘法
   print(3 * 4)  # 12
   
   # 字符串重复
   print("Hi" * 3)  # "HiHiHi"
   
   # 列表重复
   print([1, 2] * 3)  # [1, 2, 1, 2, 1, 2]
```

III. **除法运算符 (`/`)**：
   - 总是返回浮点数，即使结果是整数
   - Python 3 中 `/` 是真除法，`//` 是地板除法

 ```python
   print(10 / 2)   # 5.0 (浮点数)
   print(10 // 2)  # 5 (整数)
   print(10 // 3)  # 3 (向下取整)
   print(-10 // 3) # -4 (向下取整)
```

VI. **取模运算符 (`%`)**：
   - 返回除法余数
   - 也用于字符串格式化

```python
   # 求余数
   print(10 % 3)  # 1
   print(10 % 2)  # 0
   
   # 字符串格式化
   name = "Alice"
   age = 25
   print("My name is %s and I'm %d years old" % (name, age))
```

---

## 比较运算符

用于比较两个值，返回布尔值（True 或 False）。

| 运算符 | 名称 | 描述 | 示例 | 结果 |
|--------|------|------|------|------|
| `==` | 等于 | 比较对象是否相等 | `(10 == 21)` | `False` |
| `!=` | 不等于 | 比较两个对象是否不相等 | `(10 != 21)` | `True` |
| `>` | 大于 | 返回x是否大于y | `(10 > 21)` | `False` |
| `<` | 小于 | 返回x是否小于y | `(10 < 21)` | `True` |
| `>=` | 大于等于 | 返回x是否大于等于y | `(10 >= 21)` | `False` |
| `<=` | 小于等于 | 返回x是否小于等于y | `(10 <= 21)` | `True` |

### 详细说明：

I. **比较运算符的链式使用**：
```python
   # Python 支持链式比较
   x = 5
   print(1 < x < 10)      # True
   print(1 < x and x < 10)  # 等价写法
```

II. **不同类型的比较**：
```python
   # 数字比较
   print(3 == 3.0)     # True (值相等)
   print(3 == '3')     # False (类型不同)
   print(3 == 3 and type(3) == type(3.0))  # False
   
   # 字符串比较（按字典序）
   print("apple" < "banana")  # True
   print("Apple" < "apple")   # True (大写字母ASCII码小于小写)
```

III. **比较运算符的特殊应用**：
 ```python
   # 用于排序
   numbers = [5, 2, 8, 1, 9]
   numbers.sort()  # 使用比较运算符排序
   print(numbers)  # [1, 2, 5, 8, 9]
```

---

## 赋值运算符

用于给变量赋值。

| 运算符 | 名称 | 描述 | 等价于 |
|--------|------|------|--------|
| `=` | 简单赋值 | 将右侧值赋给左侧变量 | `c = a + b` |
| `+=` | 加法赋值 | `c += a` 等效于 `c = c + a` | `c = c + a` |
| `-=` | 减法赋值 | `c -= a` 等效于 `c = c - a` | `c = c - a` |
| `*=` | 乘法赋值 | `c *= a` 等效于 `c = c * a` | `c = c * a` |
| `/=` | 除法赋值 | `c /= a` 等效于 `c = c / a` | `c = c / a` |
| `%=` | 取模赋值 | `c %= a` 等效于 `c = c % a` | `c = c % a` |
| `**=` | 幂赋值 | `c **= a` 等效于 `c = c ** a` | `c = c ** a` |
| `//=` | 取整除赋值 | `c //= a` 等效于 `c = c // a` | `c = c // a` |
| `:=` | 海象运算符 | 在表达式中赋值并返回值 | Python 3.8+ |

### 详细说明：

I. **基本赋值**：
 ```python
   # 简单赋值
   x = 10
   y = 20
   z = x + y  # z = 30
   
   # 多重赋值
   a = b = c = 1  # 所有变量都指向同一个值
   x, y, z = 1, 2, 3  # 分别赋值
 ```

II. **复合赋值运算符**：
```python
   # 等价写法比较
   x = 10
   
   # x = x + 5
   x += 5  # x = 15
   
   # x = x * 2
   x *= 2  # x = 30
   
   # x = x // 3
   x //= 3  # x = 10
```

III. **海象运算符 (`:=`)**：
   - Python 3.8 新增
   - 在表达式中同时进行赋值和返回值
   - 避免重复计算

 ```python
   # 传统写法（需要调用len()两次）
   names = ["Alice", "Bob", "Charlie", "David", "Eve"]
   if len(names) > 3:
       print(f"Too many names: {len(names)}")
   
   # 使用海象运算符（只调用len()一次）
   if (n := len(names)) > 3:
       print(f"Too many names: {n}")
   
   # 在while循环中使用
   while (line := input("Enter text: ")) != "quit":
       print(f"You entered: {line}")
 ```

---

## 位运算符

按二进制位进行操作。

| 运算符 | 名称 | 描述 | 示例（假设 a=60, b=13） |
|--------|------|------|-------------------------|
| `&` | 按位与 | 两个相应位都为1时结果为1 | `a & b` = 12 (`0011 1100 & 0000 1101` = `0000 1100`) |
| `\|` | 按位或 | 两个相应位有一个为1时结果为1 | `a \| b` = 61 (`0011 1100 \| 0000 1101` = `0011 1101`) |
| `^` | 按位异或 | 两个相应位不同时结果为1 | `a ^ b` = 49 (`0011 1100 ^ 0000 1101` = `0011 0001`) |
| `~` | 按位取反 | 每个二进制位取反 | `~a` = -61 (`~0011 1100` = `1100 0011`) |
| `<<` | 左移 | 各二进制位全部左移若干位 | `a << 2` = 240 (`0011 1100 << 2` = `1111 0000`) |
| `>>` | 右移 | 各二进制位全部右移若干位 | `a >> 2` = 15 (`0011 1100 >> 2` = `0000 1111`) |

### 详细说明：

I. **二进制表示**：
 ```python
   # 查看数字的二进制表示
   a = 60
   b = 13
   
   print(bin(a))  # 0b111100
   print(bin(b))  # 0b1101
   
   # 实际在计算机中（8位表示）：
   # a = 60  = 0011 1100
   # b = 13  = 0000 1101
 ```

II. **位运算示例**：
```python
   a = 60  # 0011 1100
   b = 13  # 0000 1101
   
   print(a & b)   # 12  (0000 1100)
   print(a | b)   # 61  (0011 1101)
   print(a ^ b)   # 49  (0011 0001)
   print(~a)      # -61 (1100 0011，补码表示)
   print(a << 2)  # 240 (1111 0000)
   print(a >> 2)  # 15  (0000 1111)
 ```

III. **位运算的应用**：
```python
   # 判断奇偶
   def is_even(n):
       return (n & 1) == 0
   
   print(is_even(10))  # True
   print(is_even(7))   # False
   
   # 乘以/除以2的幂
   x = 10
   print(x << 1)  # 20 (相当于 ×2)
   print(x >> 1)  # 5  (相当于 ÷2)
   
   # 交换两个变量的值（不使用临时变量）
   a, b = 5, 10
   a ^= b
   b ^= a
   a ^= b
   print(a, b)  # 10 5
```

---

## 逻辑运算符

用于组合条件语句。

| 运算符 | 逻辑表达式 | 描述 | 示例（假设 a=10, b=20） |
|--------|------------|------|-------------------------|
| `and` | `x and y` | 布尔"与" - 如果 x 为 False，返回 x，否则返回 y | `(a and b)` 返回 `20` |
| `or` | `x or y` | 布尔"或" - 如果 x 是 True，返回 x，否则返回 y | `(a or b)` 返回 `10` |
| `not` | `not x` | 布尔"非" - 如果 x 为 True，返回 False，反之亦然 | `not(a and b)` 返回 `False` |

### 详细说明：

I. **逻辑运算的真值表**：

   | x | y | x and y | x or y | not x |
   |---|---|---------|--------|-------|
   | True | True | True | True | False |
   | True | False | False | True | False |
   | False | True | False | True | True |
   | False | False | False | False | True |

II. **短路求值**：
```python
   # and 运算符：如果第一个为False，直接返回第一个值，不计算第二个
   print(0 and 10/0)  # 0（不会报错，因为10/0不会被执行）
   
   # or 运算符：如果第一个为True，直接返回第一个值，不计算第二个
   print(10 or 10/0)  # 10（不会报错）
   ```

III. **实际应用**：
```python
   # 条件判断
   age = 25
   has_license = True
   
   if age >= 18 and has_license:
       print("可以开车")
   
   # 默认值设置
   name = ""
   display_name = name or "匿名用户"
   print(display_name)  # "匿名用户"
   
   # 非空检查
   items = []
   if not items:
       print("列表为空")
```

---

## 成员运算符

测试序列中是否包含某个成员。

| 运算符 | 描述 | 示例 |
|--------|------|------|
| `in` | 如果在指定序列中找到值返回 True | `x in y` |
| `not in` | 如果在指定序列中没有找到值返回 True | `x not in y` |

### 详细说明：

I. **在不同数据类型中的应用**：
```python
   # 字符串
   text = "Hello World"
   print('H' in text)      # True
   print('hello' in text)  # False（区分大小写）
   print('World' in text)  # True
   
   # 列表
   numbers = [1, 2, 3, 4, 5]
   print(3 in numbers)      # True
   print(10 in numbers)     # False
   
   # 字典（检查键）
   person = {'name': 'Alice', 'age': 25}
   print('name' in person)   # True
   print('Alice' in person)  # False（不检查值）
   
   # 集合
   colors = {'red', 'green', 'blue'}
   print('green' in colors)  # True
```

II. **与循环结合**：
```python
   # 遍历列表
   fruits = ['apple', 'banana', 'orange']
   for fruit in fruits:
       print(fruit)
   
   # 检查并处理
   user_input = input("请输入命令: ")
   valid_commands = ['start', 'stop', 'pause', 'resume']
   
   if user_input in valid_commands:
       print(f"执行命令: {user_input}")
   else:
       print("无效命令")
```

---

## 身份运算符

比较两个对象的内存地址（是否为同一对象）。

| 运算符 | 描述 | 示例 |
|--------|------|------|
| `is` | 判断两个标识符是否引用自同一对象 | `x is y` |
| `is not` | 判断两个标识符是否引用自不同对象 | `x is not y` |

### 详细说明：

I. **`is` vs `==`**：
```python
   # 对于小整数（Python会缓存-5到256的整数）
   a = 256
   b = 256
   print(a == b)  # True（值相等）
   print(a is b)  # True（同一对象）
   
   # 对于大整数
   c = 257
   d = 257
   print(c == d)  # True（值相等）
   print(c is d)  # False（不同对象）
   
   # 对于列表
   list1 = [1, 2, 3]
   list2 = [1, 2, 3]
   list3 = list1
   
   print(list1 == list2)  # True（值相等）
   print(list1 is list2)  # False（不同对象）
   print(list1 is list3)  # True（同一对象）
```

II. **`id()` 函数**：
```python
   # id() 返回对象的唯一标识符（内存地址）
   x = [1, 2, 3]
   y = [1, 2, 3]
   z = x
   
   print(id(x))  # 如：140123456789000
   print(id(y))  # 如：140123456789128（不同）
   print(id(z))  # 如：140123456789000（与x相同）
   
   # x is y 等价于 id(x) == id(y)
   print(x is y)  # False
   print(id(x) == id(y))  # False
```

III. **特殊值检查**：
```python
   # 检查None（推荐使用is）
   value = None
   
   if value is None:
       print("值为None")
   
   # 检查布尔值
   flag = True
   if flag is True:  # 但通常直接写 if flag: 更好
       print("标志为真")
```

---

## 运算符优先级

当多个运算符同时出现时，Python 按照以下优先级执行：

| 优先级 | 运算符 | 描述 |
|--------|--------|------|
| 最高 | `()` | 括号 |
| ∨ | `**` | 指数 |
| ∨ | `~` `+` `-` | 按位取反，正负号 |
| ∨ | `*` `/` `%` `//` | 乘、除、取模、取整除 |
| ∨ | `+` `-` | 加、减 |
| ∨ | `<<` `>>` | 左移、右移 |
| ∨ | `&` | 按位与 |
| ∨ | `^` `\|` | 按位异或、按位或 |
| ∨ | `<` `<=` `>` `>=` | 比较运算符 |
| ∨ | `==` `!=` | 等于、不等于 |
| ∨ | `=` `%=` `=` `//=` `-=` `+=` `*=` `**=` | 赋值运算符 |
| ∨ | `is` `is not` | 身份运算符 |
| ∨ | `in` `not in` | 成员运算符 |
| ∨ | `not` | 逻辑非 |
| ∨ | `and` | 逻辑与 |
| 最低 | `or` | 逻辑或 |
